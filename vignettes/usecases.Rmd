---
title: "Usecases"
author: "Steffen Ehrmann"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
  rmarkdown::html_document:
    toc: true
    toc_float: true
    theme: spacelab
link-citations: yes
vignette: >
  %\VignetteIndexEntry{Usecases}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

In this document you can find a collection of operations that can be carried out with the help of functions provided in `rasterTools`. It is assumed that you have read the [Introduction](/rastertools/articles/introduction.html).

The operations are grouped into the following groups. However, before jumping there we should prepare the working environment.

1) [Basic operations](/rastertools/articles/basics.html)
2) [Classify values](/rastertools/articles/classification.html)
3) [Morphological operations](/rastertools/articles/morphological.html)
4) [Identify features/objects](/rastertools/articles/features.html)

Lets start with reading in the required packages:

```{r}
library(rasterTools)
library(raster)
library(magrittr)
```

For now, we can just ignore the note to run `updatePaths`, because we do not access the paths. We do however access the spatial example datasets of `rasterTools`, so lets also read these in.

```{r, fig.width=7, out.width='100%'}
continuous <- rtData$continuous
categorial <- rtData$categorial

visualise(raster::stack(continuous, categorial))
```

Moreover, we need to create two frequently occurring derivations thereof, a raster where classes are assigned to distinct patches and a binarised raster, where some class(es) have been set as focal class. Here we derive them from the categorical raster, but this could as well be done from the continuous raster.

```{r, fig.width=7, out.width='100%'}
catPatchesObj <- rSubstitute(obj = categorial, 
                             old = sort(base::unique(raster::values(categorial))),
                             new = c(1, 2, 3, 4, 3, 4, 5, 5, 5))

binarised <- rBinarise(categorial, match = c(41, 44, 47))

visualise(raster::stack(catPatchesObj, binarised))
```

